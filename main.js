(()=>{"use strict";function e(e,t,n){var r=document.querySelector("#card-template").content.cloneNode(!0),o=r.querySelector(".card__image"),c=r.querySelector(".card__title"),a=r.querySelector(".card__delete-button"),s=r.querySelector(".card__like-button");return o.src=e.link,o.alt=e.name,c.textContent=e.name,n&&s.addEventListener("click",n),a.addEventListener("click",(function(){t(a)})),r}function t(e){e.currentTarget.classList.toggle("card__like-button_is-active")}function n(e){e.closest(".places__item").remove()}function r(e){e&&(e.classList.add("popup_is-opened"),document.addEventListener("keydown",c),e.addEventListener("click",a))}function o(e){e&&(e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",c),e.removeEventListener("click",a))}function c(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&o(t)}}function a(e){e.target.classList.contains("popup")&&o(e.target)}function s(e,t,n,r){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r.inputErrorClass),o&&(o.textContent=n,o.classList.add(r.errorClass))}function i(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n.inputErrorClass),r&&(r.textContent="",r.classList.remove(n.errorClass))}function u(e,t,n){return t.validity.valid?(i(e,t,n),!0):t.dataset.errorMessage?(s(e,t,t.dataset.errorMessage,n),!1):(s(e,t,t.validationMessage,n),!1)}function l(e,t,n){e.every((function(e){return u(e.closest("form"),e,n)}))?(t.classList.remove(n.inactiveButtonClass),t.disabled=!1):(t.classList.add(n.inactiveButtonClass),t.disabled=!0)}function p(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(n){i(e,n,t)})),r.classList.add(t.inactiveButtonClass),r.disabled=!0}var d,m={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};d=m,document.querySelectorAll(d.formSelector).forEach((function(e){var t=Array.from(e.querySelectorAll(d.inputSelector)),n=e.querySelector(d.submitButtonSelector);l(t,n,d),t.forEach((function(r){r.addEventListener("input",(function(){u(e,r,d),l(t,n,d)}))})),e.addEventListener("submit",(function(e){e.preventDefault(),l(t,n,d)}))}));var _=document.querySelector(".popup_type_edit"),v=_.querySelector(".popup__form"),f=v.querySelector('input[name="name"]'),y=v.querySelector('input[name="description"]'),S=document.querySelector(".profile__title"),q=document.querySelector(".profile__description"),k=document.querySelector(".popup_type_new-card"),L=k.querySelector(".popup__form"),E=L.querySelector('input[name="place-name"]'),g=L.querySelector('input[name="link"]'),b=document.querySelector(".places__list"),C=document.querySelector(".profile__edit-button"),h=document.querySelector(".profile__add-button"),x=document.querySelector(".popup_type_image"),B=x.querySelector(".popup__image"),j=x.querySelector(".popup__caption");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(r){var o=e(r,n,t);b.appendChild(o)})),C.addEventListener("click",(function(){f.value=S.textContent,y.value=q.textContent,p(v,m),r(_)})),h.addEventListener("click",(function(){L.reset(),p(L,m),r(k)})),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");o(t),t.classList.contains("popup_type_edit")?p(v,m):t.classList.contains("popup_type_new-card")&&p(L,m)}))})),b.addEventListener("click",(function(e){if(e.target.classList.contains("card__image")){var t=e.target.src,n=e.target.alt;B.src=t,B.alt=n,j.textContent=n,r(x)}})),v.addEventListener("submit",(function(e){e.preventDefault(),S.textContent=f.value,q.textContent=y.value,o(_)})),L.addEventListener("submit",(function(r){r.preventDefault();var c=e({name:E.value,link:g.value},n,t);b.prepend(c),o(k),L.reset(),p(L,m)}))})();