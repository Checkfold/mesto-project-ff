(()=>{"use strict";function e(e,t,r){var n=document.querySelector("#card-template").content.cloneNode(!0),o=n.querySelector(".card__image"),c=n.querySelector(".card__title"),a=n.querySelector(".card__delete-button"),s=n.querySelector(".card__like-button");return o.src=e.link,o.alt=e.name,c.textContent=e.name,r&&s.addEventListener("click",r),a.addEventListener("click",(function(){t(a)})),n}function t(e){e.currentTarget.classList.toggle("card__like-button_is-active")}function r(e){e.closest(".places__item").remove()}function n(e){e&&(e.classList.add("popup_is-opened"),document.addEventListener("keydown",c),e.addEventListener("click",a))}function o(e){e&&(e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",c),e.removeEventListener("click",a))}function c(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&o(t)}}function a(e){e.target.classList.contains("popup")&&o(e.target)}function s(e,t,r,n){var o=e.querySelector("#".concat(t.id,"-error"))||t.nextElementSibling;t.classList.add(n.inputErrorClass),o&&(o.textContent=r,o.classList.add(n.errorClass))}function i(e,t,r){var n=e.querySelector("#".concat(t.id,"-error"))||t.nextElementSibling;t.classList.remove(r.inputErrorClass),n&&(n.textContent="",n.classList.remove(r.errorClass))}function u(e,t,r){return t.validity.valid?(i(e,t,r),!0):t.dataset.regexError&&!new RegExp(t.dataset.regexPattern).test(t.value)?(s(e,t,t.dataset.regexError,r),!1):(s(e,t,t.validationMessage,r),!1)}function l(e,t,r){e.every((function(e){return u(e.closest("form"),e,r)}))?(t.classList.remove(r.inactiveButtonClass),t.disabled=!1):(t.classList.add(r.inactiveButtonClass),t.disabled=!0)}function p(e,t){var r=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);r.forEach((function(r){i(e,r,t)})),n.classList.add(t.inactiveButtonClass),n.disabled=!0}var d,m={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};d=m,document.querySelectorAll(d.formSelector).forEach((function(e){var t=Array.from(e.querySelectorAll(d.inputSelector)),r=e.querySelector(d.submitButtonSelector);l(t,r,d),t.forEach((function(n){n.addEventListener("input",(function(){u(e,n,d),l(t,r,d)})),n.dataset.regexPattern&&n.dataset.regexError})),e.addEventListener("submit",(function(n){n.preventDefault();var o=t.every((function(t){return u(e,t,d)}));l(t,r,d),o&&!r.disabled&&e.submit()}))}));var _=document.querySelector(".popup_type_edit"),v=_.querySelector(".popup__form"),f=v.querySelector('input[name="name"]'),y=v.querySelector('input[name="description"]'),S=document.querySelector(".profile__title"),q=document.querySelector(".profile__description"),k=document.querySelector(".popup_type_new-card"),E=k.querySelector(".popup__form"),g=E.querySelector('input[name="place-name"]'),L=E.querySelector('input[name="link"]'),b=document.querySelector(".places__list"),x=document.querySelector(".profile__edit-button"),C=document.querySelector(".profile__add-button"),h=document.querySelector(".popup_type_image"),B=h.querySelector(".popup__image"),j=h.querySelector(".popup__caption");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(n){var o=e(n,r,t);b.appendChild(o)})),x.addEventListener("click",(function(){f.value=S.textContent,y.value=q.textContent,p(v,m),n(_)})),C.addEventListener("click",(function(){E.reset(),p(E,m),n(k)})),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");o(t),t.classList.contains("popup_type_edit")?p(v,m):t.classList.contains("popup_type_new-card")&&p(E,m)}))})),b.addEventListener("click",(function(e){if(e.target.classList.contains("card__image")){var t=e.target.src,r=e.target.alt;B.src=t,B.alt=r,j.textContent=r,n(h)}})),v.addEventListener("submit",(function(e){e.preventDefault(),S.textContent=f.value,q.textContent=y.value,o(_)})),E.addEventListener("submit",(function(n){n.preventDefault();var c=e({name:g.value,link:L.value},r,t);b.prepend(c),o(k),E.reset(),p(E,m)}))})();